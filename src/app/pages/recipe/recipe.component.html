<app-nav-bar></app-nav-bar>
<div class="mainContainer">
  <div class="profileUser">       
      <div class=img-profile>
          <img [src]="user.picture" alt="user.user_name" >
      </div>
      <div class="user-name">
        <p>{{user.user_name}}</p>
      </div>
      <div class="followers-number">
          <div *ngIf="hideDiv == false" class="followers">
              <a  *ngIf="this.followers.followStatus == false" (click)=" followUser()">Seguir</a>
              <a *ngIf="this.followers.followStatus" (click)="unfollow( )">Dejar de seguir</a>
          </div>
    
      </div>
  </div>
<hr>

<div class="arrow">
  <a (click)="goBack()"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
    viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g>	<g>
      <path  style="fill:#40b3a2"d="M492,236H68.442l70.164-69.824c7.829-7.792,7.859-20.455,0.067-28.284c-7.792-7.83-20.456-7.859-28.285-0.068
        l-104.504,104c-0.007,0.006-0.012,0.013-0.018,0.019c-7.809,7.792-7.834,20.496-0.002,28.314c0.007,0.006,0.012,0.013,0.018,0.019
        l104.504,104c7.828,7.79,20.492,7.763,28.285-0.068c7.792-7.829,7.762-20.492-0.067-28.284L68.442,276H492
        c11.046,0,20-8.954,20-20C512,244.954,503.046,236,492,236z"/></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></a>
  </div>
<div class="container">
  <div class=" title-recipe">
    <p class="animated fadeIn Fast header-title">
      {{ resultRecipe.title }}
    </p>
    <div class="icon">
        <div class="likes" *ngIf="hideDiv == false">
          <a *ngIf="favorites == false"  (click)= "addFav()">Guardar en favoritos</a>
          <a *ngIf="favorites" (click)= "addFav()">Eliminar de favoritos</a>
        </div>
      
        <div style="display: inline">
          Likes: {{likes}}
            <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0 -->
        <svg (click)= "addLike()" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 469.333 469.333" style="enable-background:new 0 0 469.333 469.333;" xml:space="preserve">
        <path style="fill:black" d="M352,42.667c-6.464,0-13.219,0.855-20.234,2.158C308.273,17.439,273.496,0,234.667,0
        s-73.607,17.439-97.099,44.824c-7.016-1.302-13.771-2.158-20.234-2.158C52.635,42.667,0,95.302,0,160
        c0,44.333,25,84.635,64.25,104.563L64.042,425.76c-0.01,11.635,4.51,22.573,12.729,30.802c8.229,8.24,19.156,12.771,30.792,12.771
        h254.25c24,0,43.521-19.521,43.521-43.521V264.406c39.104-19.979,64-60.219,64-104.406C469.333,95.302,416.698,42.667,352,42.667z"
        />
        <path style="fill:black;" d="M361.813,448h-254.25c-5.927,0-11.5-2.313-15.698-6.51c-4.188-4.198-6.5-9.771-6.49-15.708L85.43,384
        H384v41.813C384,438.042,374.042,448,361.813,448z"/>
        <path style="opacity:0.2;fill:#FFFFFF;enable-background:new    ;" d="M106.708,425.781L106.755,384H85.43l-0.055,41.781
        c-0.01,5.938,2.302,11.51,6.49,15.708c4.198,4.198,9.771,6.51,15.698,6.51h18.163c-5.079,0-9.857-2.313-13.454-6.51
        C108.681,437.292,106.699,431.719,106.708,425.781z"/>
        <path class="color-hat" style="opacity:0.1;enable-background:new;" d="M362.667,384v41.813c0,12.229-8.535,22.188-19.017,22.188h18.163
        c12.229,0,22.188-9.958,22.188-22.188V384H362.667z"/>
        <path  [ngClass]= "{'color-hat': colorHat == true}" style="fill:#F2F2F2;" d="M390.604,247.802c-0.563,0.229-1.094,0.5-1.594,0.823c-1.344,0.833-2.448,1.938-3.271,3.208
        c-0.833,1.26-1.396,2.719-1.625,4.281c-0.094,0.594-0.125,1.188-0.115,1.792v104.76H85.457l0.137-104.615
        c0.01-0.583-0.021-1.177-0.104-1.75c-0.229-1.615-0.823-3.115-1.688-4.417c-0.813-1.219-1.875-2.281-3.167-3.094
        c-0.531-0.333-1.094-0.625-1.677-0.865C43.948,232.615,21.333,198.135,21.333,160c0-52.938,43.063-96,96-96
        c2.069,0,4.253,0.25,6.396,0.419c-10.792,18.757-17.063,40.43-17.063,63.581c0,5.896,4.771,10.667,10.667,10.667
        S128,133.896,128,128c0-58.813,47.854-106.667,106.667-106.667S341.333,69.188,341.333,128c0,5.896,4.771,10.667,10.667,10.667
        c5.896,0,10.667-4.771,10.667-10.667c0-23.151-6.271-44.824-17.063-63.581C347.747,64.25,349.931,64,352,64
        c52.938,0,96,43.063,96,96C448,198,425.479,232.438,390.604,247.802z"/>
        <path  [ngClass]= "{'color-hat': colorHat == true }" style="opacity:0.2;fill:black;enable-background:new    ;" d="M234.667,34.667c48.971,0,90.135,31.029,104.672,73.604
        c-9.301-49.398-52.615-86.938-104.672-86.938s-95.371,37.539-104.672,86.938C144.531,65.695,185.695,34.667,234.667,34.667z"/>
        <path style="opacity:0.1;enable-background:new ;" d="M352,64c-2.069,0-4.253,0.25-6.396,0.419
        c0.078,0.137,0.132,0.288,0.21,0.424c43.318,4.306,77.52,45.077,77.52,95.156c0,38-19.917,72.438-50.759,87.802
        c-0.497,0.229-0.967,0.5-1.41,0.823c-1.188,0.833-2.164,1.938-2.892,3.208c-0.737,1.26-1.234,2.719-1.438,4.281
        c-0.083,0.594-0.111,1.188-0.102,1.792v104.76H384v-104.76c-0.01-0.604,0.021-1.198,0.115-1.792
        c0.229-1.563,0.792-3.021,1.625-4.281c0.823-1.271,1.927-2.375,3.271-3.208c0.5-0.323,1.031-0.594,1.594-0.823
        C425.479,232.438,448,198,448,160C448,107.063,404.938,64,352,64z"/>
        <path [ngClass]= "{'color-hat': colorHat == true}" style="opacity:0.2;fill:black;enable-background:new    ;" d="M102.738,256.302c-0.203-1.615-0.728-3.115-1.492-4.417
        c-0.719-1.219-1.659-2.281-2.801-3.094c-0.47-0.333-0.967-0.625-1.483-0.865C66,232.615,46,198.135,46,160
        c0-50.079,34.202-90.85,77.52-95.156c0.078-0.137,0.132-0.288,0.21-0.424C121.586,64.25,119.402,64,117.333,64
        c-52.938,0-96,43.063-96,96c0,38.135,22.615,72.615,57.625,87.927c0.583,0.24,1.146,0.531,1.677,0.865
        c1.292,0.813,2.354,1.875,3.167,3.094c0.865,1.302,1.458,2.802,1.688,4.417c0.083,0.573,0.115,1.167,0.104,1.75l-0.137,104.615
        h17.253l0.121-104.615C102.84,257.469,102.813,256.875,102.738,256.302z"/>
        <g>
        <path style="fill:#303C42;" d="M128,224c0-5.896-4.771-10.667-10.667-10.667s-10.667,4.771-10.667,10.667
        c0,28.01,30.896,66.469,34.417,70.771c2.115,2.563,5.177,3.896,8.26,3.896c2.375,0,4.771-0.792,6.76-2.417
        c4.552-3.74,5.208-10.458,1.479-15.021C146.146,267.292,128,239.438,128,224z"/>
        <path style="fill:#303C42;" d="M352,213.333c-5.896,0-10.667,4.771-10.667,10.667c0,15.385-18.146,43.271-29.583,57.24
        c-3.729,4.552-3.063,11.271,1.49,15.01c1.979,1.625,4.375,2.417,6.76,2.417c3.083,0,6.135-1.333,8.25-3.896
        c3.521-4.302,34.417-42.76,34.417-70.771C362.667,218.104,357.896,213.333,352,213.333z"/>
        <path style="fill:#303C42;" d="M234.667,213.333c-5.896,0-10.667,4.771-10.667,10.667v64c0,5.896,4.771,10.667,10.667,10.667
        s10.667-4.771,10.667-10.667v-64C245.333,218.104,240.563,213.333,234.667,213.333z"/>
        </g>
        <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="-67.2348" y1="617.4443" x2="-46.216" y2="607.6429" gradientTransform="matrix(21.3333 0 0 -21.3333 1430.1112 13315.2227)">
        <stop  offset="0" style="stop-color:#FFFFFF;stop-opacity:0.2"/>
        <stop  offset="1" style="stop-color:#FFFFFF;stop-opacity:0"/>
        </linearGradient>
        <path style="fill:url(#SVGID_1_);" d="M352,42.667c-6.464,0-13.219,0.855-20.234,2.158C308.273,17.439,273.496,0,234.667,0
        s-73.607,17.439-97.099,44.824c-7.016-1.302-13.771-2.158-20.234-2.158C52.635,42.667,0,95.302,0,160
        c0,44.333,25,84.635,64.25,104.563L64.042,425.76c-0.01,11.635,4.51,22.573,12.729,30.802c8.229,8.24,19.156,12.771,30.792,12.771
        h254.25c24,0,43.521-19.521,43.521-43.521V264.406c39.104-19.979,64-60.219,64-104.406C469.333,95.302,416.698,42.667,352,42.667z"
         /><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>
    </svg>
        </div>
</div>
    <br>
    <p>
      <i class="fas fa-info-circle"></i> {{ resultRecipe.dificulty }}  - <i class="far fa-clock"></i>
      {{ resultRecipe.duration }}.
    </p>
  </div>

  <div class="row animated fadeIn Fast">
    <div class="col-md-12 col-lg-4 img-recipe" >
      <img [src]="resultRecipe.picture" [alt]="resultRecipe.title" />

    </div>
    <br>
    <div class="col-lg-8">
      <p><strong>Ingredientes:</strong></p>
      <li *ngFor = "let ingredient of ingredientsRecipe">{{ingredient}}</li>
      <br>
      <p><strong>Preparación:</strong></p>
      <li>{{ resultRecipe.description }}</li>
    </div>
    </div>
    <div class="buttonUpdate">
       <button class="hideBtnRecipe" *ngIf="updateOwner" (click)="updateRecipeBtn()"> Actualizar receta</button>
    </div>

<hr>
  
      <div class="comment-container">
        <h4>Comentarios ({{numberComment}})</h4>
        <form>
          <div class="form-group" >
            <textarea class="form-control" id="textarea" rows="4" value="Reset" placeholder="Deja tu comentario" #comentario></textarea>
          </div>
        </form>
       <button (click)="postComment(comentario.value, resultRecipe.recipe_id)">Enviar comentario</button>
      </div>

  <div class="bothComments">
    <div class="userComment" *ngFor = "let comment of comments">
      <div class="userFavRecipe">
        <div class="profileOther">
            <p>{{comment.user_name}}</p>
        </div>
        </div>
      <p>
         <i class="em em-drooling_face" aria-role="presentation"></i> {{comment.description}}
      </p>
    </div>
  
</div>

<div class="descrp" id="udpateRecipe" [ngClass]= "{'animation': animation == true}">
  <div class="header-title">
    <p>Actualiza tu receta</p>
  </div>
  <hr>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <div>
          <p>Titulo</p>
        </div>
          <input type="text" #title name="titulo" value="" placeholder="Titulo" formControlName="titulo" placeholder="{{ resultRecipe.title }}">
      </div>
      <div class="form-group">
          <div><p>Ingredientes</p></div>
          <ng-select class ="dropdown"  bindLabel ="ingredients" bindValue="id" [multiple]="true" (add)="onAdd($event)" (remove)="onRemove($event)">
              <div>  
                <ng-option *ngFor ="let ingredients of this.ingredients" bindLabel="ingredients.name" (add)=" (ingredients.name)" (remove)="onRemove(ingredients.name)">{{ingredients.name}}</ng-option>
              </div>
          </ng-select>
      </div>
      <div class="radio-group">
          <div>
            <p>Tipo de comida</p>
          </div>
          <div class="food">
              <label>
                  <input type="radio" formControlName="comida"   value="vegana" (click) ="valueFood(vegana)" #vegana>Vegana
                  <span class="outer-circle-left"></span>
              </label>   
              <label> 
                  <input type="radio" formControlName="comida"   value="saludable" (click) ="valueFood(saludable)" #saludable>Saludable 
                  <span class="outer-circle-middle"></span>
              </label>
              
              <label>
                  <input type="radio" formControlName="comida"  value="picoteo" (click) ="valueFood(picoteo)" #picoteo>Picoteo
                  <span class="outer-circle-right"></span>
              </label>
              <label>
                  <input type="radio" formControlName="comida"  value="postres" (click) ="valueFood(postres.value)" #postres>Postres
                  <span class="outer-circle-right"></span>
              </label>
          </div>
      </div>  
      <div class="form-group">
        <div>
            <input type="text" value="{{ resultRecipe.duration }}"  name="duracion" placeholder="Duración" formControlName="duracion">
        </div>
    </div>
    <div class="radio-group">      
        <div>
          <p>Dificultad</p> 

        </div> 
        <div class="dificulty">
            <label>
                <input type="radio" formControlName="dificultad" value="facil"   (click) ="valueDificulty(facil)" #facil>Fácil
                <span class="outer-circle-left"></span>
            </label>   
            <label> 
                <input type="radio" formControlName="dificultad"  value="media" (click) ="valueDificulty(media)" #media>Media
                <span class="outer-circle-middle"></span>
            </label>
            <label>
                <input type="radio" formControlName="dificultad"  value="dificil"  (click) ="valueDificulty(dificil)" #dificil>Difícil
                <span class="outer-circle-right"></span>
            </label>
        </div>
    </div>
    <div class="form-group">
      <div>
        <p>Descripción</p>
      </div>
      <div class="textarea">
          <textarea type="textarea" value="{{ resultRecipe.description}}"  name="descripcion" formControlName="descripcion"  placeholder="{{resultRecipe.description}}"></textarea>
      </div>  
    </div>
    <div class="form-group">
      <div>
        <p>Foto</p>
      </div>
      <div>
          <input type="text"  formControlName="foto" value="{{ resultRecipe.picture }}"  name="foto" placeholder="{{resultRecipe.picture}}">
          
      </div>
  </div>
  <div class="btn">
      <button class="button" (click)=" updateRecipeBtn()">Actualizar</button>  
        <a class="button"  (click)=" updateRecipeBtn()">Cancelar</a>
</div>
    </form>

      


</div>